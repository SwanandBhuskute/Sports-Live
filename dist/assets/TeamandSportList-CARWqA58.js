import{r as a,b as T,j as t}from"./index-BXPKFFQD.js";import{A as d}from"./constants-C9Jc7q6O.js";import{N as C}from"./NavBar-CcY2k9lh.js";const R=()=>{const[c,x]=a.useState([]),[i,b]=a.useState([]),[g,j]=a.useState([]),[n,h]=a.useState(null),[f,m]=a.useState(null),[r,p]=a.useState(null),[y,l]=a.useState(!0),v=T();a.useEffect(()=>{const e=async()=>{try{const u=await(await fetch(`${d}/sports`)).json();x(u.sports),l(!1)}catch(o){console.error("Error fetching sports:",o),l(!1)}},s=async()=>{try{const u=await(await fetch(`${d}/teams`)).json();b(u),l(!1)}catch(o){console.error("Error fetching teams:",o),l(!1)}};e(),s()},[]),a.useEffect(()=>{(async()=>{try{const o=await(await fetch(`${d}/articles`)).json();j(o),l(!1)}catch(s){console.error("Error fetching articles:",s),l(!1)}})()},[]),a.useEffect(()=>{c.length>0&&h(c[0].name)},[c]),a.useEffect(()=>{if(n&&i.length>0){const e=i.filter(s=>s.plays===n);e.length>0&&m(e[0].name)}},[n,i]);const w=e=>{h(e),m(null)},N=e=>{m(e)},S=g.filter(e=>e.sport.name===n&&e.teams.some(s=>s.name===f)),E=async e=>{try{const o=await(await fetch(`${d}/articles/${e.id}`)).json();p(o),document.body.style.overflow="hidden"}catch(s){console.error("Error fetching article details:",s)}},A=()=>{p(null),document.body.style.overflow="auto"};return t.jsxs("div",{children:[v.pathname==="/teams"&&t.jsx(C,{}),t.jsxs("div",{className:"mb-4",children:[t.jsx("h1",{className:"bg-gray-800 text-white text-2xl font-bold flex justify-center p-2 rounded-lg m-1",children:"Select your Favorite Team"}),t.jsxs("div",{className:"mb-4 flex justify-center",children:[t.jsxs("select",{value:n||"",onChange:e=>w(e.target.value),className:"p-2 border border-gray-300 rounded w-1/3 m-1",children:[t.jsx("option",{value:"",disabled:!0,children:"Select Sport"}),c.map(e=>t.jsx("option",{value:e.name,children:e.name},e.id))]}),t.jsxs("select",{value:f||"",onChange:e=>N(e.target.value),className:"p-2 border border-gray-300 rounded w-1/3 m-1",children:[t.jsx("option",{value:"",disabled:!0,children:"Select Team"}),i.filter(e=>e.plays===n).map(e=>t.jsx("option",{value:e.name,children:e.name},e.id))]})]})]}),t.jsxs("div",{children:[t.jsx("h1",{className:"bg-gray-800 text-white text-xl font-semibold p-1 text-center rounded-lg m-1 mb-4 mt-2",children:"Articles of your favourite team"}),t.jsxs("div",{children:[y&&t.jsx("p",{children:"Loading..."}),S.map(e=>t.jsxs("div",{className:"p-2 border border-gray-300 rounded mb-2",children:[t.jsx("h2",{className:"text-lg font-semibold",children:e.title}),t.jsx("p",{children:e.summary}),t.jsx("button",{onClick:()=>E(e),className:"bg-blue-600 text-white px-2 py-1 rounded-md text-sm hover:bg-blue-700 focus:outline-none focus:ring focus:border-blue-300",children:"Read more"})]},e.id))]})]}),t.jsx("div",{className:`fixed top-0 left-0 w-full h-full overflow-y-auto flex items-center justify-center bg-black bg-opacity-50 transition-opacity ${r?"opacity-100":"opacity-0 pointer-events-none"}`,children:t.jsx("div",{className:"bg-gray-300 rounded p-6 max-w-2xl mx-auto my-8 max-h-full overflow-y-auto",children:r&&t.jsxs(t.Fragment,{children:[t.jsx("img",{src:r.thumbnail,alt:r.title,className:"mb-4 rounded-lg w-full h-40 object-cover"}),t.jsx("h2",{className:"text-2xl font-bold mb-4",children:r.title}),t.jsx("p",{className:"mb-4",children:r.content}),t.jsxs("p",{className:"font-semibold",children:["Ends at: ",new Date(r.date).toLocaleString()]}),r.teams.length>0&&t.jsxs("div",{className:"flex justify-between items-center mt-2",children:[t.jsx("p",{className:"font-semibold",children:"Teams:"}),t.jsx("div",{className:"flex flex-wrap gap-1",children:r.teams.map(e=>t.jsx("span",{className:"bg-gray-200 px-2 py-1 rounded",children:e.name},e.id))})]}),t.jsx("button",{onClick:A,className:"bg-red-500 text-white px-4 py-2 mt-3 rounded-md hover:bg-red-700 focus:outline-none focus:ring focus:border-red-300",children:"Close"})]})})})]})};export{R as default};
