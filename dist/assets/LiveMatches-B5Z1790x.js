import{r as c,j as e,A as x}from"./index-CHljlE-R.js";import{f as w}from"./dateUtils-gG17I_SJ.js";import{a as N,b as y}from"./NavBar-ML9D02KV.js";const M=({selectedSports:g})=>{const[d,h]=c.useState([]),[f,o]=c.useState(!0),n=localStorage.getItem("userData"),u=n?JSON.parse(n):null,{t:r,i18n:j}=N();c.useEffect(()=>{(async()=>{try{const a=await(await fetch(`${x}/matches`)).json();h(a.matches),o(!1)}catch(s){console.error("Error fetching matches:",s),o(!1)}})()},[]);const l=d.filter(t=>g.includes(t.sportName));return e.jsxs(e.Fragment,{children:[f&&e.jsx("p",{children:"Loading..."}),l&&u.preferences&&l.length>0&&e.jsxs(e.Fragment,{children:[e.jsxs("h1",{className:"text-xl font-bold p-2 rounded-lg m-1 display-block underline",children:[r("Your Picked"),":"]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-2",children:l.map(t=>e.jsxs("div",{className:"relative bg-white rounded p-3 shadow-lg border border-black",children:[t.isRunning&&e.jsx("div",{className:"flex absolute top-0 right-0 p-1 text-red-500 font-bold rounded-full",children:"●Live"}),e.jsx("h2",{className:"text-xl font-bold mb-1",children:r(`${t.sportName}`)}),e.jsx("h2",{className:"text-lg font-semibold mb-1",children:t.name}),e.jsxs("p",{className:"text-gray-700 mb-1",children:[r("Location"),": ",t.location]}),e.jsxs("p",{className:"text-gray-700",children:[r("Ends at"),": ",w(t.endsAt,j.language)]}),e.jsxs("div",{className:"flex justify-between items-center mt-2",children:[e.jsxs("p",{className:"text-gray-600",children:[r("Teams"),":"]}),e.jsx("div",{className:"flex flex-wrap gap-1",children:t.teams.map(s=>e.jsx("span",{className:"bg-gray-200 px-1 rounded",children:s.name},s.id))})]})]},t.id))})]})]})},P=()=>{var t;const[g,d]=c.useState([]),h=y(),[f,o]=c.useState(!0),{t:n}=N();c.useEffect(()=>{(async()=>{try{const i=(await(await fetch(`${x}/matches`)).json()).matches.filter(p=>p.isRunning).map(async p=>{const S=await(await fetch(`${x}/matches/${p.id}`)).json();return{...p,score:S.score}}),v=await Promise.all(i);d(v),o(!1)}catch(a){console.error("Error fetching matches:",a),o(!1)}})()},[]);const u=async s=>{try{const m=await(await fetch(`${x}/matches/${s}`)).json();d(b=>b.map(i=>i.id===s?{...i,score:m.score}:i))}catch(a){console.error("Error syncing scores:",a)}},r=localStorage.getItem("userData"),j=r?JSON.parse(r):{},l=h?((t=j.preferences)==null?void 0:t.selectedSports)||[]:[];return e.jsxs("div",{className:"bg-red-300 rounded-lg p-2 m-2 shadow-md",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-2",children:[f&&e.jsx("p",{children:"Loading..."}),g.map(s=>e.jsxs("div",{className:"relative bg-white rounded p-4 shadow-md border border-black",children:[e.jsxs("div",{className:"flex absolute top-0 right-0 p-1 text-red-500 font-bold rounded-full",children:["●Live ",e.jsx("p",{className:"ml-1 cursor-pointer",onClick:()=>u(s.id),children:"⟳"})]}),e.jsx("h2",{className:"text-xl font-bold mb-1",children:n(`${s.sportName}`)}),e.jsx("h2",{className:"text-lg font-semibold mb-1",children:s.name}),e.jsxs("p",{className:"text-gray-700",children:[n("Location"),": ",s.location]}),s.score&&e.jsxs("div",{className:"mt-2",children:[e.jsx("p",{className:"font-semibold",children:"Scores:"}),e.jsx("div",{className:"flex space-x-4",children:Object.entries(s.score).map(([a,m])=>e.jsx("p",{children:`${a}: ${m}*`},a))})]})]},s.id))]}),h&&e.jsx(M,{selectedSports:l})]})};export{P as L};
