import{r as a,j as e}from"./index-CbRCAM3Q.js";import{u,N as h}from"./NavBar-EkK_mEt3.js";import{A as x}from"./constants-C9Jc7q6O.js";const g=({closeModal:o})=>{const[n,l]=a.useState(""),[d,i]=a.useState(""),[s,t]=a.useState(!1),c=localStorage.getItem("authToken"),m=async()=>{try{(await fetch(`${x}/user/password`,{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:`Bearer ${c}`},body:JSON.stringify({current_password:n,new_password:d})})).ok?(console.log("Password updated successfully"),t(!0),setTimeout(()=>{t(!1),o()},3e3)):console.error("Error updating password")}catch(r){console.error("Error updating password:",r)}};return e.jsxs("div",{className:"bg-white p-6 w-1/3 rounded-md relative",children:[s&&e.jsx("div",{className:"bg-green-200 text-green-700 px-4 py-2 rounded-md",children:"Password Changed Successfully"}),e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Change Password"}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"currentPassword",className:"block mb-2 font-semibold",children:"Current Password"}),e.jsx("input",{type:"password",id:"currentPassword",value:n,onChange:r=>l(r.target.value),className:"border border-gray-300 px-3 py-2 rounded-md w-full"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"newPassword",className:"block mb-2 font-semibold",children:"New Password"}),e.jsx("input",{type:"password",id:"newPassword",value:d,onChange:r=>i(r.target.value),className:"border border-gray-300 px-3 py-2 rounded-md w-full"})]}),e.jsxs("div",{className:"flex justify-end",children:[e.jsx("button",{onClick:o,className:"bg-gray-300 text-gray-700 px-4 py-2 rounded-md mr-2 hover:bg-gray-400 focus:outline-none",children:"Cancel"}),e.jsx("button",{onClick:m,className:"bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-700 focus:outline-none",children:"Save"})]})]})},j=()=>{const o=localStorage.getItem("authToken"),[n,l]=a.useState(!1),[d,i]=a.useState(!0),s=u(o),t=localStorage.getItem("userData"),c=t?JSON.parse(t):null,m=()=>{l(!1)};return a.useEffect(()=>{s!==null&&i(!1)},[s]),e.jsxs(e.Fragment,{children:[e.jsx(h,{}),e.jsxs("div",{className:"max-w-md mx-auto mt-8 p-6 bg-gray-100 rounded-lg",children:[e.jsxs("h2",{className:"text-2xl font-bold mb-4",children:["User Details",e.jsx("hr",{className:"m-2"})]}),e.jsxs("p",{className:"mb-2",children:[e.jsx("strong",{children:"Name:"})," ",c.name]}),e.jsxs("p",{className:"mb-2",children:[e.jsx("strong",{children:"Email:"})," ",c.email]}),e.jsx("h3",{className:"text-lg font-bold mb-2",children:"Preferences:"}),e.jsx("div",{className:"mb-4",children:d?e.jsx("p",{children:"Loading..."}):e.jsx(e.Fragment,{children:s&&s.selectedTeams&&s.selectedSports?e.jsx(e.Fragment,{children:s.selectedTeams.length>0||s.selectedSports.length>0?e.jsxs(e.Fragment,{children:[e.jsxs("p",{className:"mb-2",children:[e.jsx("strong",{children:"Selected Sports:"})," ",s.selectedSports.join(", ")]}),e.jsxs("p",{className:"mb-2",children:[e.jsx("strong",{children:"Selected Teams:"})," ",s.selectedTeams.join(", ")]})]}):e.jsx("p",{children:"No Preferences selected"})}):e.jsx("p",{children:"No Preferences selected"})})}),e.jsx("button",{onClick:()=>l(!0),className:"bg-blue-500 text-white px-4 py-2 mt-4 rounded-md hover:bg-blue-700 focus:outline-none",children:"Change Password"})]}),n&&e.jsx("div",{className:"fixed top-0 left-0 w-full h-full flex items-center justify-center bg-black bg-opacity-50",children:e.jsx(g,{closeModal:m})})]})};export{j as default};
