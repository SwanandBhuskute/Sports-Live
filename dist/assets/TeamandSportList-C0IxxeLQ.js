import{r as a,b as $,j as t}from"./index-B2aDYPK_.js";import{A as m}from"./constants-C9Jc7q6O.js";import{a as L,N as k}from"./NavBar-BHJ-zrLT.js";import{f as R}from"./dateUtils-gG17I_SJ.js";const O=()=>{const[i,b]=a.useState([]),[d,g]=a.useState([]),[j,y]=a.useState([]),[l,h]=a.useState(null),[p,u]=a.useState(null),[r,x]=a.useState(null),[v,c]=a.useState(!0),N=$(),{t:n,i18n:w}=L();a.useEffect(()=>{const e=async()=>{try{const f=await(await fetch(`${m}/sports`)).json();b(f.sports),c(!1)}catch(o){console.error("Error fetching sports:",o),c(!1)}},s=async()=>{try{const f=await(await fetch(`${m}/teams`)).json();g(f),c(!1)}catch(o){console.error("Error fetching teams:",o),c(!1)}};e(),s()},[]),a.useEffect(()=>{(async()=>{try{const o=await(await fetch(`${m}/articles`)).json();y(o),c(!1)}catch(s){console.error("Error fetching articles:",s),c(!1)}})()},[]),a.useEffect(()=>{i.length>0&&h(i[0].name)},[i]),a.useEffect(()=>{if(l&&d.length>0){const e=d.filter(s=>s.plays===l);e.length>0&&u(e[0].name)}},[l,d]);const S=e=>{h(e),u(null)},E=e=>{u(e)},T=j.filter(e=>e.sport.name===l&&e.teams.some(s=>s.name===p)),A=async e=>{try{const o=await(await fetch(`${m}/articles/${e.id}`)).json();x(o),document.body.style.overflow="hidden"}catch(s){console.error("Error fetching article details:",s)}},C=()=>{x(null),document.body.style.overflow="auto"};return t.jsxs("div",{children:[N.pathname==="/teams"&&t.jsx(k,{}),t.jsxs("div",{className:"mb-4",children:[t.jsx("h1",{className:"bg-gray-800 text-white text-2xl font-bold flex justify-center p-2 rounded-lg m-1",children:n("Select your Favorite Team")}),t.jsxs("div",{className:"mb-4 flex justify-center",children:[t.jsxs("select",{value:l||"",onChange:e=>S(e.target.value),className:"p-2 border border-gray-300 rounded w-1/3 m-1",children:[t.jsx("option",{value:"",disabled:!0,children:n("Select Sport")}),i.map(e=>t.jsx("option",{value:e.name,children:n(`${e.name}`)},e.id))]}),t.jsxs("select",{value:p||"",onChange:e=>E(e.target.value),className:"p-2 border border-gray-300 rounded w-1/3 m-1",children:[t.jsx("option",{value:"",disabled:!0,children:n("Select Team")}),d.filter(e=>e.plays===l).map(e=>t.jsx("option",{value:e.name,children:e.name},e.id))]})]})]}),t.jsxs("div",{children:[t.jsx("h1",{className:"bg-gray-800 text-white text-xl font-semibold p-1 text-center rounded-lg m-1 mb-4 mt-2",children:n("Articles of your favourite team")}),t.jsxs("div",{children:[v&&t.jsx("p",{children:"Loading..."}),T.map(e=>t.jsxs("div",{className:"p-2 border border-gray-300 rounded mb-2",children:[t.jsx("h2",{className:"text-lg font-semibold",children:e.title}),t.jsx("p",{children:e.summary}),t.jsx("button",{onClick:()=>A(e),className:"bg-blue-600 text-white px-2 py-1 rounded-md text-sm hover:bg-blue-700 focus:outline-none focus:ring focus:border-blue-300",children:n("Read more")})]},e.id))]})]}),t.jsx("div",{className:`fixed top-0 left-0 w-full h-full overflow-y-auto flex items-center justify-center bg-black bg-opacity-50 transition-opacity ${r?"opacity-100":"opacity-0 pointer-events-none"}`,children:t.jsx("div",{className:"bg-gray-300 rounded p-6 max-w-2xl mx-auto my-8 max-h-full overflow-y-auto",children:r&&t.jsxs(t.Fragment,{children:[t.jsx("h2",{className:"text-2xl font-bold mb-4",children:r.title}),t.jsx("img",{src:r.thumbnail,alt:r.title,className:"mb-4 rounded-lg w-full h-full object-cover"}),t.jsx("p",{className:"mb-4",children:r.content}),t.jsx("p",{className:"font-semibold",children:R(r.date,w.language)}),r.teams.length>0&&t.jsxs("div",{className:"flex justify-between items-center mt-2",children:[t.jsxs("p",{className:"font-semibold",children:[n("Teams"),":"]}),t.jsx("div",{className:"flex flex-wrap gap-1",children:r.teams.map(e=>t.jsx("span",{className:"bg-gray-200 px-2 py-1 rounded",children:e.name},e.id))})]}),t.jsx("button",{onClick:C,className:"bg-red-500 text-white px-4 py-2 mt-3 rounded-md hover:bg-red-700 focus:outline-none focus:ring focus:border-red-300",children:n("Close")})]})})})]})};export{O as default};
