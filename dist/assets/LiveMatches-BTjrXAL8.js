import{r as c,j as e}from"./index-CsaiKf86.js";import{A as m}from"./constants-C9Jc7q6O.js";import{a as v}from"./NavBar-pqgaU9Ms.js";const w=({selectedSports:p})=>{const[l,i]=c.useState([]),[x,o]=c.useState(!0);c.useEffect(()=>{(async()=>{try{const f=await(await fetch(`${m}/matches`)).json();i(f.matches),o(!1)}catch(r){console.error("Error fetching matches:",r),o(!1)}})()},[]);const g=l.filter(s=>p.includes(s.sportName));return e.jsxs(e.Fragment,{children:[x?e.jsx("p",{children:"Loading..."}):e.jsx("h1",{className:"text-xl font-bold p-2 rounded-lg m-1 display-block underline",children:"Your Picked:"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-2",children:g.map(s=>e.jsxs("div",{className:"relative bg-white rounded p-3 shadow-lg border border-black",children:[s.isRunning&&e.jsx("div",{className:"flex absolute top-0 right-0 p-1 text-red-500 font-bold rounded-full",children:"●Live"}),e.jsx("h2",{className:"text-xl font-bold mb-1",children:s.sportName}),e.jsx("h2",{className:"text-lg font-semibold mb-1",children:s.name}),e.jsxs("p",{className:"text-gray-700 mb-1",children:["Location: ",s.location]}),e.jsxs("p",{className:"text-gray-700",children:["Ends at: ",new Date(s.endsAt).toLocaleString()]}),e.jsxs("div",{className:"flex justify-between items-center mt-2",children:[e.jsx("p",{className:"text-gray-600",children:"Teams:"}),e.jsx("div",{className:"flex flex-wrap gap-1",children:s.teams.map(r=>e.jsx("span",{className:"bg-gray-200 px-1 rounded",children:r.name},r.id))})]})]},s.id))})]})},E=()=>{var j;const[p,l]=c.useState([]),i=v(),[x,o]=c.useState(!0);c.useEffect(()=>{(async()=>{try{const n=(await(await fetch(`${m}/matches`)).json()).matches.filter(h=>h.isRunning).map(async h=>{const N=await(await fetch(`${m}/matches/${h.id}`)).json();return{...h,score:N.score}}),b=await Promise.all(n);l(b),o(!1)}catch(a){console.error("Error fetching matches:",a),o(!1)}})()},[]);const g=async t=>{try{const d=await(await fetch(`${m}/matches/${t}`)).json();l(u=>u.map(n=>n.id===t?{...n,score:d.score}:n))}catch(a){console.error("Error syncing scores:",a)}},s=localStorage.getItem("userData"),r=s?JSON.parse(s):{},f=i?((j=r.preferences)==null?void 0:j.selectedSports)||[]:[];return e.jsxs("div",{className:"bg-yellow-300 rounded-lg p-2 m-2 shadow-md",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-2",children:[x&&e.jsx("p",{children:"Loading..."}),p.map(t=>e.jsxs("div",{className:"relative bg-white rounded p-4 shadow-md border border-black",children:[e.jsxs("div",{className:"flex absolute top-0 right-0 p-1 text-red-500 font-bold rounded-full",children:["●Live ",e.jsx("p",{className:"ml-1 cursor-pointer",onClick:()=>g(t.id),children:"⟳"})]}),e.jsx("h2",{className:"text-xl font-bold mb-1",children:t.sportName}),e.jsx("h2",{className:"text-lg font-semibold mb-1",children:t.name}),e.jsxs("p",{className:"text-gray-700",children:["Location: ",t.location]}),t.score&&e.jsxs("div",{className:"mt-2",children:[e.jsx("p",{className:"font-semibold",children:"Scores:"}),e.jsx("div",{className:"flex space-x-4",children:Object.entries(t.score).map(([a,d])=>e.jsx("p",{children:`${a}: ${d}*`},a))})]})]},t.id))]}),i&&e.jsx(w,{selectedSports:f})]})};export{E as L};
