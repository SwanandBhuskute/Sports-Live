import{r as t,j as e,A as m}from"./index-zUvurxNo.js";import{u as h,a as x,N as g}from"./NavBar-DK3-NYlL.js";const p=({closeModal:n})=>{const[o,l]=t.useState(""),[d,u]=t.useState(""),[s,a]=t.useState(!1),c=localStorage.getItem("authToken"),i=async()=>{try{(await fetch(`${m}/user/password`,{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:`Bearer ${c}`},body:JSON.stringify({current_password:o,new_password:d})})).ok?(console.log("Password updated successfully"),a(!0),setTimeout(()=>{a(!1),n()},3e3)):console.error("Error updating password")}catch(r){console.error("Error updating password:",r)}};return e.jsxs("div",{className:"bg-white p-6 w-1/3 rounded-md relative",children:[s&&e.jsx("div",{className:"bg-green-200 text-green-700 px-4 py-2 rounded-md",children:"Password Changed Successfully"}),e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Change Password"}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"currentPassword",className:"block mb-2 font-semibold",children:"Current Password"}),e.jsx("input",{type:"password",id:"currentPassword",value:o,onChange:r=>l(r.target.value),className:"border border-gray-300 px-3 py-2 rounded-md w-full"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"newPassword",className:"block mb-2 font-semibold",children:"New Password"}),e.jsx("input",{type:"password",id:"newPassword",value:d,onChange:r=>u(r.target.value),className:"border border-gray-300 px-3 py-2 rounded-md w-full"})]}),e.jsxs("div",{className:"flex justify-end",children:[e.jsx("button",{onClick:n,className:"bg-gray-300 text-gray-700 px-4 py-2 rounded-md mr-2 hover:bg-gray-400 focus:outline-none",children:"Cancel"}),e.jsx("button",{onClick:i,className:"bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-700 focus:outline-none",children:"Save"})]})]})},j=()=>{const n=localStorage.getItem("authToken"),[o,l]=t.useState(!1),[d,u]=t.useState(!0),s=h(n),{t:a}=x(),c=localStorage.getItem("userData"),i=c?JSON.parse(c):null,r=()=>{l(!1)};return t.useEffect(()=>{s!==null&&u(!1)},[s]),e.jsxs(e.Fragment,{children:[e.jsx(g,{}),e.jsxs("div",{className:"max-w-md mx-auto mt-8 p-6 bg-gray-100 rounded-lg",children:[e.jsxs("h2",{"data-testid":"userdetailscypress",className:"text-2xl font-bold mb-4",children:[a("User Details"),e.jsx("hr",{className:"m-2"})]}),e.jsxs("p",{"data-testid":"namecypress",className:"mb-2",children:[e.jsxs("strong",{children:[a("Name"),":"]})," ",i.name]}),e.jsxs("p",{"data-testid":"emailcypress",className:"mb-2",children:[e.jsxs("strong",{children:[a("Email"),":"]})," ",i.email]}),e.jsxs("h3",{className:"text-lg font-bold mb-2",children:[a("Preferences"),":"]}),e.jsx("div",{className:"mb-4",children:d?e.jsx("p",{children:"Loading..."}):e.jsx(e.Fragment,{children:s&&s.selectedTeams&&s.selectedSports?e.jsx(e.Fragment,{children:s.selectedTeams.length>0||s.selectedSports.length>0?e.jsxs(e.Fragment,{children:[e.jsxs("p",{className:"mb-2",children:[e.jsxs("strong",{children:[a("Selected Sports"),":"]})," ",s.selectedSports.join(", ")]}),e.jsxs("p",{className:"mb-2",children:[e.jsxs("strong",{children:[a("Selected Teams"),":"]})," ",s.selectedTeams.join(", ")]})]}):e.jsx("p",{children:"No Preferences selected"})}):e.jsx("p",{children:"No Preferences selected"})})}),e.jsx("button",{onClick:()=>l(!0),className:"bg-blue-500 text-white px-4 py-2 mt-4 rounded-md hover:bg-blue-700 focus:outline-none",children:"Change Password"})]}),o&&e.jsx("div",{className:"fixed top-0 left-0 w-full h-full flex items-center justify-center bg-black bg-opacity-50",children:e.jsx(p,{closeModal:r})})]})};export{j as default};
