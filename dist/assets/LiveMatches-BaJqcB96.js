import{r as c,j as e}from"./index-BXPKFFQD.js";import{A as g}from"./constants-C9Jc7q6O.js";import{a as v}from"./NavBar-CcY2k9lh.js";const S=({selectedSports:f})=>{const[l,i]=c.useState([]),[u,o]=c.useState(!0),d=localStorage.getItem("userData"),h=d?JSON.parse(d):null;c.useEffect(()=>{(async()=>{try{const s=await(await fetch(`${g}/matches`)).json();i(s.matches),o(!1)}catch(a){console.error("Error fetching matches:",a),o(!1)}})()},[]);const m=l.filter(t=>f.includes(t.sportName));return e.jsxs(e.Fragment,{children:[u&&e.jsx("p",{children:"Loading..."}),m&&h.preferences&&e.jsxs(e.Fragment,{children:[e.jsx("h1",{className:"text-xl font-bold p-2 rounded-lg m-1 display-block underline",children:"Your Picked:"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-2",children:m.map(t=>e.jsxs("div",{className:"relative bg-white rounded p-3 shadow-lg border border-black",children:[t.isRunning&&e.jsx("div",{className:"flex absolute top-0 right-0 p-1 text-red-500 font-bold rounded-full",children:"●Live"}),e.jsx("h2",{className:"text-xl font-bold mb-1",children:t.sportName}),e.jsx("h2",{className:"text-lg font-semibold mb-1",children:t.name}),e.jsxs("p",{className:"text-gray-700 mb-1",children:["Location: ",t.location]}),e.jsxs("p",{className:"text-gray-700",children:["Ends at: ",new Date(t.endsAt).toLocaleString()]}),e.jsxs("div",{className:"flex justify-between items-center mt-2",children:[e.jsx("p",{className:"text-gray-600",children:"Teams:"}),e.jsx("div",{className:"flex flex-wrap gap-1",children:t.teams.map(a=>e.jsx("span",{className:"bg-gray-200 px-1 rounded",children:a.name},a.id))})]})]},t.id))})]})]})},D=()=>{var a;const[f,l]=c.useState([]),i=v(),[u,o]=c.useState(!0);c.useEffect(()=>{(async()=>{try{const n=(await(await fetch(`${g}/matches`)).json()).matches.filter(x=>x.isRunning).map(async x=>{const b=await(await fetch(`${g}/matches/${x.id}`)).json();return{...x,score:b.score}}),N=await Promise.all(n);l(N),o(!1)}catch(r){console.error("Error fetching matches:",r),o(!1)}})()},[]);const d=async s=>{try{const p=await(await fetch(`${g}/matches/${s}`)).json();l(j=>j.map(n=>n.id===s?{...n,score:p.score}:n))}catch(r){console.error("Error syncing scores:",r)}},h=localStorage.getItem("userData"),m=h?JSON.parse(h):{},t=i?((a=m.preferences)==null?void 0:a.selectedSports)||[]:[];return e.jsxs("div",{className:"bg-yellow-300 rounded-lg p-2 m-2 shadow-md",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-2",children:[u&&e.jsx("p",{children:"Loading..."}),f.map(s=>e.jsxs("div",{className:"relative bg-white rounded p-4 shadow-md border border-black",children:[e.jsxs("div",{className:"flex absolute top-0 right-0 p-1 text-red-500 font-bold rounded-full",children:["●Live ",e.jsx("p",{className:"ml-1 cursor-pointer",onClick:()=>d(s.id),children:"⟳"})]}),e.jsx("h2",{className:"text-xl font-bold mb-1",children:s.sportName}),e.jsx("h2",{className:"text-lg font-semibold mb-1",children:s.name}),e.jsxs("p",{className:"text-gray-700",children:["Location: ",s.location]}),s.score&&e.jsxs("div",{className:"mt-2",children:[e.jsx("p",{className:"font-semibold",children:"Scores:"}),e.jsx("div",{className:"flex space-x-4",children:Object.entries(s.score).map(([r,p])=>e.jsx("p",{children:`${r}: ${p}*`},r))})]})]},s.id))]}),i&&e.jsx(S,{selectedSports:t})]})};export{D as L};
